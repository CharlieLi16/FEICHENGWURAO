# 导演操作手册

纽约非诚勿扰 2026 - 导演控制系统使用指南

---

## 目录

1. [系统概览](#系统概览)
2. [活动前准备](#活动前准备)
3. [导演控制台](#导演控制台)
4. [主屏幕控制](#主屏幕控制)
5. [活动流程](#活动流程)
6. [快捷键](#快捷键)
7. [常见问题](#常见问题)

---

## 系统概览

### 页面说明

| 页面 | 网址 | 用途 |
|------|------|------|
| 导演控制台 | `/director` | 控制整个活动流程 |
| 嘉宾数据设置 | `/director/setup` | 添加/编辑嘉宾资料 |
| 幻灯片管理 | `/director/slides` | 上传活动幻灯片 |
| 主屏幕 | `/stage` | 观众可见的大屏幕显示 |
| 女嘉宾控制页 | `/guest/1` ~ `/guest/12` | 女嘉宾灭灯/爆灯操作 |

### 实时同步

所有页面通过 SSE (Server-Sent Events) 实时同步：
- 导演在控制台的操作会立即反映到主屏幕
- 女嘉宾的灭灯/爆灯会实时显示
- 连接状态显示在右上角（绿色 = 已连接）

---

## 活动前准备

### 1. 设置嘉宾数据

访问 `/director/setup`：

**女嘉宾资料（12位）：**
- 姓名、昵称
- 年龄、星座
- 学校、专业
- 照片（上传或拖拽）
- 3个标签（会在资料卡中展示）
- 个人介绍

**男嘉宾资料（6位）：**
- 姓名、昵称
- 年龄
- 学校
- 照片
- VCR1 和 VCR2 视频链接
- 个人介绍

> ⚠️ 设置完成后点击 **"保存设置"** 按钮！

### 2. 上传幻灯片

访问 `/director/slides`：

**预设幻灯片：**
- 开场幻灯片 - 活动开始前展示
- 中场休息 - 中场时展示
- 牵手成功 - 配对成功时展示
- 牵手失败 - 配对失败时展示
- 结束页面 - 活动结束时展示

**自定义幻灯片（5个）：**
- 可用于任何场景
- 在导演台点击即可显示

### 3. 准备音效

音效文件放在 `public/assets/sounds/` 目录：

| 文件名 | 触发时机 |
|--------|----------|
| `male-enter.mp3` | 男嘉宾入场 |
| `light-off.mp3` | 灭灯 |
| `burst.mp3` | 爆灯 |
| `success.mp3` | 牵手成功 |
| `fail.mp3` | 牵手失败 |
| `vcr-start.mp3` | VCR 开始 |
| `round-start.mp3` | 环节开始 |
| `countdown.mp3` | 倒计时 |
| `applause.mp3` | 掌声 |

### 4. 测试检查

- [ ] 嘉宾照片正常显示
- [ ] VCR 视频可以播放
- [ ] 幻灯片已上传
- [ ] 主屏幕显示正常
- [ ] 音效正常播放

---

## 导演控制台

访问 `/director` 进入导演控制台。

### 界面布局

```
┌─────────────────────────────────────────────────────────┐
│  🎬 导演控制台                          [⚙️设置] [●已连接] │
├─────────────────┬─────────────────┬─────────────────────┤
│  【环节控制】    │  【灯光状态】    │  【男嘉宾】          │
│                 │                 │                     │
│  当前环节        │  12个灯光控制    │  选择当前男嘉宾      │
│  上一步/下一步   │  亮/灭/爆灯      │  当前男嘉宾信息      │
│  快速跳转        │  显示资料按钮    │                     │
│                 │                 │  【快捷链接】         │
│  【女嘉宾介绍】  │  重置所有灯光    │  打开主屏幕         │
│  全屏展示女嘉宾  │                 │  嘉宾数据设置        │
│                 │                 │                     │
│  【VCR控制】     │                 │  【女嘉宾控制页】    │
│  VCR1 / VCR2    │                 │  #1 ~ #12 链接       │
│                 │                 │                     │
│  【最终结果】    │                 │  【重置活动】        │
│  牵手成功/失败   │                 │                     │
│                 │                 │                     │
│  【DJ音效台】    │                 │                     │
│  音量控制        │                 │                     │
│  音效按钮        │                 │                     │
│                 │                 │                     │
│  【幻灯片】      │                 │                     │
│  快速切换        │                 │                     │
└─────────────────┴─────────────────┴─────────────────────┘
```

### 环节控制

**环节流程：**
1. 等待开始
2. 开场
3. 女嘉宾介绍
4. 男嘉宾入场
5. 男嘉宾提问
6. 才艺/惩罚
7. VCR1 播放
8. 第一轮问答
9. VCR2 播放
10. 第二轮问答
11. 权力反转
12. 心动女生揭晓
13. 最后一问
14. 最终选择
15. 结果公布

**操作：**
- 点击 **"下一步"** 进入下一环节
- 点击 **"上一步"** 返回上一环节
- 或直接点击 **快速跳转** 中的环节名称

### 女嘉宾介绍

用于全屏展示女嘉宾的 PPT 风格资料页：
- 点击数字按钮选择要介绍的女嘉宾
- 主屏幕会全屏显示该女嘉宾信息
- 点击 **"上一位/下一位"** 快速切换
- 点击 **"✕ 关闭"** 退出介绍模式

### 灯光控制

每个女嘉宾对应一盏灯：

| 状态 | 颜色 | 含义 |
|------|------|------|
| 亮 | 🟢 绿色 | 女嘉宾保持关注 |
| 灭 | ⚫ 灰色 | 女嘉宾放弃 |
| 爆 | 💗 粉色 | 女嘉宾主动示爱（闪烁效果）|

**操作：**
- 点击 **"亮/灭/爆"** 按钮切换状态
- 点击 **"重置所有灯光"** 全部恢复为亮灯
- 点击 **"显示资料"** 在主屏幕显示该女嘉宾资料卡

### VCR 控制

- **VCR1**: 播放男嘉宾的 VCR1 视频
- **VCR2**: 播放男嘉宾的 VCR2 视频
- **⏹️**: 停止播放

> 视频 URL 在 `/director/setup` 中设置

### DJ 音效台

**音量控制：**
- 拖动滑块调整音量（0-100%）
- 点击 25%/50%/75%/100% 快速设置
- 音量设置会立即影响正在播放的音效

**音效按钮：**
- 男嘉宾入场 👤
- 灭灯 🌑
- 爆灯 💖
- 牵手成功 💕
- 牵手失败 💔
- VCR开始 🎬
- 环节开始 🎯
- 倒计时 ⏱️
- 掌声 👏

### 幻灯片控制

- 点击幻灯片名称在主屏幕全屏显示
- 灰色按钮表示该幻灯片未上传图片
- 点击 **"✕ 关闭"** 隐藏幻灯片
- 点击 **"管理"** 进入幻灯片管理页面

### 最终结果

- **💕 牵手成功**: 播放成功音效，显示成功状态
- **💔 牵手失败**: 播放失败音效，显示失败状态

---

## 主屏幕控制

### 快捷键

| 按键 | 功能 |
|------|------|
| **H** | 隐藏/显示轮次信息 |

### 显示层级（从上到下）

1. **幻灯片层** - 最高优先级，覆盖所有内容
2. **VCR 播放层** - 视频播放时显示
3. **女嘉宾介绍层** - PPT 风格全屏介绍
4. **主界面** - 12盏灯 + 男嘉宾信息

---

## 活动流程

### 标准单轮流程

```
┌──────────────────────────────────────────────────────────┐
│  1. 选择男嘉宾 (点击男嘉宾 #1-#6)                          │
│     ↓                                                    │
│  2. 灯光自动重置，播放入场音效                              │
│     ↓                                                    │
│  3. 按流程切换环节 (下一步)                                │
│     ↓                                                    │
│  4. 播放 VCR1 / VCR2                                     │
│     ↓                                                    │
│  5. 女嘉宾灭灯/爆灯 (通过各自的控制页或导演手动操作)          │
│     ↓                                                    │
│  6. 公布结果 (牵手成功/失败)                               │
│     ↓                                                    │
│  7. 选择下一位男嘉宾，重复流程                              │
└──────────────────────────────────────────────────────────┘
```

### 女嘉宾介绍环节

```
1. 切换到 "女嘉宾介绍" 环节
2. 在 "👩 女嘉宾介绍" 面板点击 #1
3. 主屏幕全屏显示 1 号女嘉宾资料
4. 介绍完毕后点击 "下一位" 或直接点击下一个号码
5. 12 位介绍完毕后点击 "✕ 关闭"
```

### 中场休息

```
1. 在幻灯片面板点击 "中场休息"
2. 主屏幕显示中场休息幻灯片
3. 休息结束后点击 "✕ 关闭"
```

---

## 快捷键

### 主屏幕 (`/stage`)

| 按键 | 功能 |
|------|------|
| **H** | 切换轮次/环节信息显示 |

---

## 常见问题

### Q: 主屏幕显示 "连接中..."
**A:** 刷新页面，检查网络连接。如果持续无法连接，检查服务器是否正常运行。

### Q: 女嘉宾照片不显示
**A:** 
1. 检查图片是否已上传到 `/director/setup`
2. 确认已点击 "保存设置"
3. 如果是 HEIC 格式，系统会自动转换，稍等片刻

### Q: VCR 视频无法播放
**A:**
1. 检查视频 URL 是否正确
2. 支持的格式：MP4, MOV, WebM
3. 也支持 YouTube / Bilibili 链接

### Q: 音效没有声音
**A:**
1. 检查 DJ 音效台的音量是否为 0
2. 检查浏览器是否静音
3. 确认音效文件已放在 `public/assets/sounds/` 目录

### Q: 嘉宾数据消失了
**A:**
数据会自动保存到云端。如果数据消失：
1. 检查 Vercel Blob 存储状态
2. 重新输入数据并保存

### Q: 如何重置活动
**A:** 在导演控制台右下角点击 **"🔄 重置活动"**，确认后会重置所有灯光和流程状态。

---

## 联系支持

如有技术问题，请联系：
- Email: yl11475@nyu.edu
- 活动负责人: NYU Tandon CSSA

---

*最后更新: 2026年2月*
